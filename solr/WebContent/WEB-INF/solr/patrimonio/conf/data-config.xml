<dataConfig>
  <dataSource type="JdbcDataSource" 
              driver="com.mysql.jdbc.Driver"
              url="jdbc:mysql://localhost/abipuglia?zeroDateTimeBehavior=convertToNull" 
              user="abi" 
              password="abi"/>
  <document>
    <entity name="patrimonio_specializzazione" pk="id_patrimonio_specializzazione" 
    		query="SELECT distinct(IF(p.id_patrimonio_specializzazione_categoria_madre is null, concat(p.descrizione, ';$$$', ps.descrizione),concat((SELECT distinct p2.descrizione as descr FROM patrimonio_specializzazione_categoria p1, patrimonio_specializzazione_categoria p2 where p1.id_patrimonio_specializzazione_categoria_madre=p2.id_patrimonio_specializzazione_categoria and p2.id_patrimonio_specializzazione_categoria = p.id_patrimonio_specializzazione_categoria_madre),';',p.descrizione, '$$$', ps.descrizione))) as descr, p.id_patrimonio_specializzazione_categoria as id_patrimonio_specializzazione_categoria FROM patrimonio_specializzazione_categoria p, patrimonio_specializzazione ps where ps.id_patrimonio_specializzazione_categoria=p.id_patrimonio_specializzazione_categoria order by descr ASC"> 
  	
  			<field column="id_patrimonio_specializzazione_categoria" name="id_patrimonio_specializzazione_categoria"/>
  			<field column="descr" name="descrizione" />
  	</entity>    
</document>
</dataConfig>